# 서울시 토지거래허가구역 크롤러

서울시 토지거래허가구역 정보를 자동으로 수집하여 CSV 파일로 저장하는 프로그램입니다.

## 📋 목차

- [주요 기능](#주요-기능)
- [프로젝트 구조](#프로젝트-구조)
- [웹 GUI 사용 방법](#웹-gui-사용-방법-추천)
- [CLI 사용 방법](#cli-사용-방법)
- [실행 파일 빌드](#실행-파일-빌드)
- [다른 사람과 공유하기](#다른-사람과-공유하기)
- [기술 스택](#기술-스택)
- [API 키 발급](#api-키-발급)
- [문제 해결](#문제-해결)

## 🎯 주요 기능

- ✅ 서울시 25개 구/군의 토지거래허가구역 정보 자동 수집
- ✅ 지번 주소 → 도로명 주소 자동 변환
- ✅ 주소 → 위도/경도 좌표 자동 변환
- ✅ 사용자 정의 날짜 범위 설정 (최대 60일)
- ✅ 현대적인 웹 기반 GUI 인터페이스
- ✅ 실시간 진행 상황 모니터링
- ✅ Windows/Mac 실행 파일 지원
- ✅ CLI 버전 지원

## 📁 프로젝트 구조

```
토지거래허가구역/
│
├── scripts/                      # 스크립트 폴더
│   ├── cli/                      # 💻 CLI 버전
│   │   ├── 토지거래허가구역_selenium.py       # Selenium CLI
│   │   └── 토지거래허가구역_playwright.py     # Playwright CLI (추천)
│   │
│   └── gui/                      # GUI 버전
│       ├── web/                  # 🌐 웹 GUI (추천)
│       │   ├── 토지거래허가구역_웹GUI.py      # Flask 웹 서버
│       │   └── templates/
│       │       └── index.html                 # 웹 UI
│       │
│       └── desktop/              # 🖥️ 데스크톱 GUI
│           └── 토지거래허가구역_데스크톱GUI.py   # tkinter GUI
│
├── build-scripts/                # 🔧 빌드 스크립트
│   ├── build_web_app.sh          # Mac/Linux 토지거래허가구역 빌드
│   ├── build_web_app.bat         # Windows 토지거래허가구역 빌드
│   ├── build_apartment_app.sh    # Mac/Linux 공동주택 빌드
│   ├── build_apartment_app.bat   # Windows 공동주택 빌드
│   └── build_app.sh              # Mac/Linux tkinter 빌드 (비활성)
│
├── output/                       # 📊 출력 파일 폴더
│   └── *.csv                     # 수집된 CSV 파일
│
├── 서울_공동주택_Web-GUI.py      # 서울 공동주택 수집기 (별도 프로젝트)
├── pyproject.toml                # uv 프로젝트 설정
├── uv.lock                       # 의존성 잠금 파일
└── README.md                     # 이 파일
```

### 파일명 규칙

모든 파일명은 다음과 같은 패턴을 따릅니다:

- `*_Playwright_*`: Playwright 크롤링 엔진 사용
- `*_Selenium_*`: Selenium 크롤링 엔진 사용
- `*_Web-GUI.py`: Flask 웹 기반 GUI
- `*_tkinter-GUI.py`: tkinter 데스크톱 GUI
- `*_playwright.py`: Playwright CLI 버전

## 🌐 웹 GUI 사용 방법 (추천)

### 특징

웹 GUI는 다음과 같은 장점이 있습니다:

| 특징 | 설명 |
|------|------|
| 🎨 현대적 디자인 | Tailwind CSS 기반 반응형 UI |
| ⚡ 실시간 업데이트 | 진행 상황 실시간 표시 |
| 📊 대시보드 | 수집 현황을 한눈에 확인 |
| 🚀 빠른 실행 | Playwright 기반으로 안정적 |
| 🌍 크로스 플랫폼 | 브라우저만 있으면 실행 가능 |

### 1. 개발 환경에서 실행

```bash
# 의존성 설치 (최초 1회만)
uv sync

# 웹 서버 실행
uv run python scripts/gui/web/토지거래허가구역_웹GUI.py
```

실행하면 자동으로 브라우저가 열리고 `http://127.0.0.1:5000`에 접속됩니다.

### 2. 실행 파일 사용 (Python 설치 불필요)

실행 파일을 빌드한 후:

- **Windows**: `토지거래허가구역크롤러.exe` 더블클릭
- **Mac**: `토지거래허가구역크롤러` 더블클릭

자동으로 서버가 시작되고 브라우저가 열립니다.

### 3. 웹 인터페이스 사용

브라우저에서 다음과 같은 화면이 나타납니다:

```
┌─────────────────────────────────────────────┐
│  서울시 토지거래허가구역 크롤러              │ (헤더)
├─────────────────────────────────────────────┤
│  📝 설정                                     │
│  ┌─────────────────────────────────────┐    │
│  │ API 키                               │    │
│  │  주소 변환 API: [______________]     │    │
│  │  카카오 API:    [______________]     │    │
│  └─────────────────────────────────────┘    │
│  ┌─────────────────────────────────────┐    │
│  │ 수집 기간                            │    │
│  │  시작: [2025-11-01]                 │    │
│  │  종료: [2025-12-25]                 │    │
│  └─────────────────────────────────────┘    │
│  ┌─────────────────────────────────────┐    │
│  │ 저장 경로                            │    │
│  │  [/Users/username/Desktop] [찾기]   │    │
│  │  ☐ Headless 모드                    │    │
│  └─────────────────────────────────────┘    │
│                                             │
│  [ 크롤링 시작 ]  [ 중지 ]                  │
├─────────────────────────────────────────────┤
│  📊 진행 상황                                │
│  ████████████░░░░░░ 60%                     │
│  현재: 강남구  |  수집: 1,234건              │
├─────────────────────────────────────────────┤
│  📋 실시간 로그                              │
│  [23:16:44] 크롤링 시작...                  │
│  [23:16:45] 강남구 처리 중...               │
│  [23:16:50] 강남구 완료 (234건)             │
└─────────────────────────────────────────────┘
```

#### 설정 항목

1. **API 키**
   - 주소 변환 API: 기본값 제공 (변경 가능)
   - 카카오 API: 기본값 제공 (변경 가능)

2. **수집 기간**
   - 시작 날짜: 데이터 수집 시작일 (예: 2025-11-01)
   - 종료 날짜: 수집 종료일 (기본값: 오늘)

3. **저장 설정**
   - 저장 경로: CSV 파일 저장 위치 (기본값: 바탕화면)
   - Headless 모드: 브라우저 숨기기 (더 빠름)

4. **실행**
   - "크롤링 시작" 클릭
   - 실시간 로그 확인
   - 완료 시 지정 경로에 CSV 저장

### 4. 결과 파일

- **파일명**: `토지거래허가구역_서울_YYMMDD.csv`
- **인코딩**: UTF-8 with BOM (엑셀 호환)
- **컬럼**:
  1. 연번
  2. 주소 (지번)
  3. 지번(지목)
  4. 허가년월일
  5. 이용목적
  6. 이용의무종료일
  7. 허가사항
  8. 도로명주소 (자동 변환)
  9. 위도 (자동 변환)
  10. 경도 (자동 변환)

## 💻 CLI 사용 방법

GUI 없이 명령줄에서 실행하고 싶은 경우:

### Playwright 버전 (추천)

```bash
uv run python scripts/cli/토지거래허가구역_playwright.py
```

**장점**: 더 빠르고 안정적

### Selenium 버전

```bash
uv run python scripts/cli/토지거래허가구역_selenium.py
```

**참고**: WebDriver 자동 설치 필요

### 날짜 입력 방식

CLI 버전 실행 시 다음과 같이 날짜를 입력하게 됩니다:

```text
============================================================
토지거래허가구역 데이터 수집
============================================================
※ 최대 조회 가능 기간: 60일
※ 날짜 형식: YYYY-MM-DD (예: 2025-11-01)
------------------------------------------------------------
시작일자를 입력하세요: 2025-11-01
종료일자를 입력하세요: 2025-12-26

✓ 조회 기간: 2025-11-01 ~ 2025-12-26 (56일)
============================================================
```

**입력 검증**:

- ✅ 날짜 형식 자동 검증 (YYYY-MM-DD)
- ✅ 시작일 ≤ 종료일 확인
- ✅ 최대 60일 제한 검증
- ✅ 오류 시 재입력 요청

## 🔨 실행 파일 빌드

다른 사람에게 배포하거나 Python 설치 없이 사용하려면 실행 파일을 빌드하세요.

### 토지거래허가구역 크롤러 빌드

#### Mac/Linux

```bash
# 실행 권한 부여
chmod +x build-scripts/build_web_app.sh

# 빌드 실행
./build-scripts/build_web_app.sh
```

#### Windows

```cmd
# 빌드 실행
build-scripts\build_web_app.bat
```

#### 빌드 결과

- **위치**: `dist/토지거래허가구역크롤러.exe` (Windows) 또는 `dist/토지거래허가구역크롤러` (Mac)
- **포트**: 5000
- **크기**: 약 80-100MB

### 서울 공동주택 수집기 빌드

#### Mac/Linux

```bash
# 실행 권한 부여
chmod +x build-scripts/build_apartment_app.sh

# 빌드 실행
./build-scripts/build_apartment_app.sh
```

#### Windows

```cmd
# 빌드 실행
build-scripts\build_apartment_app.bat
```

#### 빌드 결과

- **위치**: `dist/서울공동주택수집기.exe` (Windows) 또는 `dist/서울공동주택수집기` (Mac)
- **포트**: 5001
- **크기**: 약 60-80MB

### 배포 방법

1. `dist` 폴더의 실행 파일을 복사
2. 다른 사람에게 전달
3. 실행 파일을 더블클릭하면 자동으로 브라우저 열림

**참고**: 두 프로그램은 각각 다른 포트(5000, 5001)를 사용하므로 동시 실행 가능합니다.

## 🎁 다른 사람과 공유하기

이 프로그램을 다른 사람들과 공유하는 방법은 두 가지가 있습니다.

### 방법 1: 실행 파일로 공유 (추천 - Python 설치 불필요)

**대상**: 일반 사용자, Python이 설치되지 않은 환경

**공유할 파일**:
1. 위의 빌드 스크립트를 실행하여 실행 파일 생성
2. `dist` 폴더 내의 실행 파일만 전달

| 프로그램 | Windows | Mac/Linux |
|---------|---------|-----------|
| 토지거래허가구역 크롤러 | `토지거래허가구역크롤러.exe` | `토지거래허가구역크롤러` |
| 서울 공동주택 수집기 | `서울공동주택수집기.exe` | `서울공동주택수집기` |

**사용 방법**:
- 받은 사람은 실행 파일을 더블클릭하기만 하면 됩니다
- 자동으로 브라우저가 열리고 웹 인터페이스가 표시됩니다
- Python이나 다른 소프트웨어 설치 불필요

**장점**:
- ✅ Python 설치 불필요
- ✅ 의존성 관리 불필요
- ✅ 사용이 매우 간편함
- ✅ 파일 하나만 전달하면 끝

**단점**:
- ❌ 파일 크기가 큼 (80-100MB)
- ❌ 코드 수정 불가

### 방법 2: 소스 코드로 공유 (개발자용)

**대상**: Python 개발자, 코드를 수정하고 싶은 사용자

**공유할 파일들**:
```
토지거래허가구역/
├── scripts/                                    # 필수
│   └── gui/web/                               # 필수
│       ├── 토지거래허가구역_웹GUI.py          # 필수 (토지거래)
│       └── templates/                         # 필수
│           └── index.html                     # 필수
├── 서울_공동주택_Web-GUI.py                    # 필수 (공동주택)
├── pyproject.toml                              # 필수
├── uv.lock                                     # 필수
├── README.md                                   # 권장
└── .gitignore                                  # 선택
```

또는 **GitHub 저장소 주소만 전달**:
```bash
git clone https://github.com/foodie-repository/seoul-transaction-permit.git
cd seoul-transaction-permit
```

**사용 방법**:
```bash
# 1. uv 설치 (최초 1회)
curl -LsSf https://astral.sh/uv/install.sh | sh  # Mac/Linux
# 또는
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"  # Windows

# 2. 의존성 설치
uv sync

# 3. 프로그램 실행
# 토지거래허가구역 크롤러
uv run python scripts/gui/web/토지거래허가구역_웹GUI.py

# 또는 서울 공동주택 수집기
uv run python 서울_공동주택_Web-GUI.py
```

**장점**:
- ✅ 코드 수정 가능
- ✅ 최신 업데이트 반영 가능
- ✅ 파일 크기가 작음

**단점**:
- ❌ Python 및 uv 설치 필요
- ❌ 기술적 지식 필요

### 방법 3: CLI 버전 공유 (고급 사용자용)

**대상**: 명령줄 환경을 선호하는 사용자

**공유할 파일들**:
- `scripts/cli/토지거래허가구역_playwright.py`
- `scripts/cli/토지거래허가구역_selenium.py`
- `서울_공동주택.py`
- `pyproject.toml`
- `uv.lock`

**사용 방법**:
```bash
uv sync
uv run python scripts/cli/토지거래허가구역_playwright.py
# 또는
uv run python 서울_공동주택.py
```

### 📦 권장 배포 방법

| 대상 | 추천 방법 | 전달 파일 |
|-----|----------|----------|
| **일반 사용자** | 실행 파일 | `토지거래허가구역크롤러.exe` 또는 `서울공동주택수집기.exe` |
| **Python 개발자** | GitHub | 저장소 주소 |
| **사내 배포** | 실행 파일 + README | `dist` 폴더 + 사용 설명서 |
| **오픈소스 공유** | GitHub | 전체 소스 코드 |

### 💡 팁

1. **실행 파일 공유 시**:
   - README 파일도 함께 제공하면 좋습니다
   - API 키 발급 방법을 안내하세요
   - 샘플 CSV 파일을 함께 제공하면 이해가 쉽습니다

2. **소스 코드 공유 시**:
   - `.gitignore`로 민감한 정보 제외
   - API 키는 환경 변수로 관리하도록 안내
   - 의존성 설치 명령어를 명확히 안내

3. **두 프로그램 모두 공유**:
   - 두 실행 파일을 함께 전달해도 됩니다
   - 다른 포트(5000, 5001)를 사용하므로 동시 실행 가능

## 🛠️ 기술 스택

| 카테고리 | 기술 |
|---------|------|
| **언어** | Python 3.11+ |
| **웹 프레임워크** | Flask, Flask-CORS |
| **크롤링** | Playwright (웹 GUI), Selenium (CLI) |
| **데이터 처리** | pandas |
| **웹 UI** | Tailwind CSS, Vanilla JavaScript |
| **패키징** | PyInstaller |
| **프로젝트 관리** | uv |
| **API** | 행정안전부 주소 API, 카카오 지오코딩 API |

## 🔑 API 키 발급

### 주소 변환 API (행정안전부)

1. [주소기반산업지원서비스](https://business.juso.go.kr/) 접속
2. 회원가입 및 로그인
3. 신청관리 → API 신청
4. 승인 후 API 키 발급 (무료)

### 카카오 지오코딩 API

1. [Kakao Developers](https://developers.kakao.com/) 접속
2. 내 애플리케이션 → 애플리케이션 추가하기
3. 앱 설정 → 요약 정보에서 REST API 키 확인 (무료)

## 📊 버전 비교

| 기능 | 웹 GUI | CLI (Playwright) | CLI (Selenium) |
|------|--------|------------------|----------------|
| 사용 편의성 | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐ |
| 실시간 모니터링 | ✅ | ❌ | ❌ |
| UI 디자인 | 현대적 | 없음 | 없음 |
| 실행 속도 | 빠름 | 빠름 | 보통 |
| 안정성 | 높음 | 높음 | 보통 |
| 배포 편의성 | 쉬움 | 어려움 | 어려움 |

## ⚠️ 주의사항

- 크롤링 대상 웹사이트의 이용약관을 준수해주세요
- **조회 기간은 최대 60일로 제한**됩니다 (웹사이트 정책)
- API 사용량 제한에 유의해주세요 (일일 제한 있음)
- 대량 데이터 수집 시 시간이 오래 걸릴 수 있습니다 (25개 구 전체: 약 10-30분)
- Headless 모드가 더 빠르지만, 문제 발생 시 창을 켜서 확인하세요
- API 키는 절대 공개 저장소에 커밋하지 마세요

## 🐛 문제 해결

### "Playwright 브라우저가 없습니다" 오류

```bash
uv run playwright install chromium
```

### 웹 서버가 실행되지 않음

```bash
# 포트가 이미 사용 중인지 확인
lsof -i :5000  # Mac/Linux
netstat -ano | findstr :5000  # Windows

# 프로세스 종료 후 재실행
```

### API 키 오류

- API 키가 올바른지 확인
- 일일 사용량 제한을 초과하지 않았는지 확인
- 네트워크 연결 상태 확인

### 데이터가 수집되지 않음

- 날짜 형식이 올바른지 확인 (YYYY-MM-DD)
- **조회 기간이 60일 이내인지 확인**
- 시작일이 종료일보다 이전인지 확인
- 해당 기간에 실제 데이터가 있는지 확인
- Headless 모드를 끄고 브라우저 창을 확인

### 날짜 입력 오류

- **"조회 기간이 60일을 초과합니다"**: 시작일과 종료일의 차이를 60일 이내로 조정
- **"시작일자가 종료일자보다 늦습니다"**: 날짜 순서를 확인하고 재입력
- **"올바른 날짜 형식이 아닙니다"**: YYYY-MM-DD 형식으로 입력 (예: 2025-11-01)

### 실행 파일이 실행되지 않음

- **Mac**: "개발자를 확인할 수 없습니다" 오류 시
  ```bash
  xattr -cr 토지거래허가구역크롤러
  ```
- **Windows**: "Windows에서 보호했습니다" 오류 시
  - "추가 정보" → "실행" 클릭

## 📜 라이선스

이 프로젝트는 개인 및 비상업적 용도로 자유롭게 사용할 수 있습니다.

## 👨‍💻 개발자

**Vibe Coding Project**

- 초보자 친화적인 MVP 개발
- Python 학습 및 실전 프로젝트
- 문의: GitHub Issues

## 🎯 향후 계획

- [ ] 전국 확대 (서울 외 지역 지원)
- [ ] 데이터 시각화 대시보드
- [ ] 데이터베이스 저장 옵션
- [ ] 스케줄링 기능 (자동 주기적 수집)
- [ ] 클라우드 배포 (웹 서비스화)

---

**🤖 Made with AI-Assisted Development**

이 프로젝트는 Claude Code를 활용하여 개발되었습니다.
