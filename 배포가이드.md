# 배포 가이드 (Distribution Guide)

이 문서는 서울 데이터 수집기를 다른 사람들에게 배포하는 방법을 설명합니다.

## 📋 목차

- [Mac vs Windows 빌드 차이점](#mac-vs-windows-빌드-차이점)
- [공유 대상별 가이드](#공유-대상별-가이드)
- [플랫폼별 빌드 방법](#플랫폼별-빌드-방법)
- [배포 패키지 만들기](#배포-패키지-만들기)
- [문제 해결](#문제-해결)

## 🖥️ Mac vs Windows 빌드 차이점

### 핵심 개념

**크로스 플랫폼 빌드는 불가능합니다!**
- Mac에서 빌드 → Mac용 실행 파일만 생성
- Windows에서 빌드 → Windows용 실행 파일만 생성

### Mac에서 빌드 시 생성 파일

```
dist/
├── 토지거래허가구역크롤러         (65MB) ← Unix 실행파일
├── 토지거래허가구역크롤러.app    (폴더) ← macOS 앱 번들 ✅
├── 서울공동주택수집기             (26MB) ← Unix 실행파일
└── 서울공동주택수집기.app        (폴더) ← macOS 앱 번들 ✅
```

**Mac 사용자에게 공유할 파일**:
- `토지거래허가구역크롤러.app` (폴더지만 Mac에서는 앱으로 보임)
- `서울공동주택수집기.app` (폴더지만 Mac에서는 앱으로 보임)

### Windows에서 빌드 시 생성 파일

```
dist/
├── 토지거래허가구역크롤러.exe    (약 80-100MB) ✅
└── 서울공동주택수집기.exe        (약 60-80MB) ✅
```

**Windows 사용자에게 공유할 파일**:
- `토지거래허가구역크롤러.exe`
- `서울공동주택수집기.exe`

## 🎯 공유 대상별 가이드

### 1. Mac 사용자에게만 공유

**현재 상황**: Mac에서 이미 빌드 완료 ✅

**공유할 파일**:
```
✅ dist/토지거래허가구역크롤러.app
✅ dist/서울공동주택수집기.app
```

**사용 방법**:
1. 두 `.app` 파일을 압축 (아래 참조)
2. 이메일/메신저/Google Drive로 전달
3. 받는 사람은 압축 해제 후 더블클릭
4. 자동으로 브라우저 열림

**Mac 보안 경고 해결**:
```bash
# 방법 1: 터미널에서 실행
xattr -cr 토지거래허가구역크롤러.app
xattr -cr 서울공동주택수집기.app

# 방법 2: GUI로 실행
# 우클릭 → "열기" → "열기" 다시 클릭
```

### 2. Windows 사용자에게만 공유

**현재 상황**: Windows용 빌드 필요 ⚠️

**빌드 방법**:
1. Windows 컴퓨터 필요
2. 프로젝트 폴더 복사
3. Windows에서 빌드 스크립트 실행:
   ```cmd
   build-scripts\build_web_app.bat
   build-scripts\build_apartment_app.bat
   ```

**공유할 파일**:
```
✅ dist\토지거래허가구역크롤러.exe
✅ dist\서울공동주택수집기.exe
```

**사용 방법**:
1. 두 `.exe` 파일을 압축
2. 이메일/메신저로 전달
3. 받는 사람은 압축 해제 후 더블클릭
4. Windows Defender 경고 시 "추가 정보" → "실행" 클릭

### 3. Mac + Windows 사용자 모두에게 공유

**필요한 작업**:
1. Mac에서 빌드 (이미 완료 ✅)
2. Windows에서 빌드 (필요)

**최종 배포 패키지**:
```
서울_데이터_수집기_v1.0/
├── Mac용/
│   ├── 토지거래허가구역크롤러.app
│   └── 서울공동주택수집기.app
├── Windows용/
│   ├── 토지거래허가구역크롤러.exe
│   └── 서울공동주택수집기.exe
├── 사용설명서.pdf
└── API키_발급가이드.pdf
```

## 🔨 플랫폼별 빌드 방법

### Mac/Linux에서 빌드

```bash
cd /Users/foodie/myproject/Crawling/토지거래허가구역

# 토지거래허가구역 크롤러
chmod +x build-scripts/build_web_app.sh
./build-scripts/build_web_app.sh

# 서울 공동주택 수집기
chmod +x build-scripts/build_apartment_app.sh
./build-scripts/build_apartment_app.sh
```

**빌드 결과**:
- `dist/토지거래허가구역크롤러.app` (65MB)
- `dist/서울공동주택수집기.app` (26MB)

### Windows에서 빌드

**사전 준비**:
1. Python 3.11+ 설치
2. uv 설치:
   ```powershell
   powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
   ```
3. 프로젝트 폴더 복사

**빌드 실행**:
```cmd
cd C:\Users\사용자명\토지거래허가구역

REM 토지거래허가구역 크롤러
build-scripts\build_web_app.bat

REM 서울 공동주택 수집기
build-scripts\build_apartment_app.bat
```

**빌드 결과**:
- `dist\토지거래허가구역크롤러.exe` (80-100MB)
- `dist\서울공동주택수집기.exe` (60-80MB)

## 📦 배포 패키지 만들기

### Mac용 배포 패키지

```bash
cd /Users/foodie/myproject/Crawling/토지거래허가구역/dist

# .app 파일 2개를 압축
zip -r 서울데이터수집기_Mac용_v1.0.zip \
    토지거래허가구역크롤러.app \
    서울공동주택수집기.app

# 사용설명서 포함 버전
mkdir 배포패키지
cp -r 토지거래허가구역크롤러.app 배포패키지/
cp -r 서울공동주택수집기.app 배포패키지/
cp ../README.md 배포패키지/사용설명서.md

zip -r 서울데이터수집기_Mac용_완전판_v1.0.zip 배포패키지/
```

**결과**:
- `서울데이터수집기_Mac용_v1.0.zip` (약 91MB)
- `서울데이터수집기_Mac용_완전판_v1.0.zip` (약 91MB + 문서)

### Windows용 배포 패키지

```cmd
cd C:\Users\사용자명\토지거래허가구역\dist

REM PowerShell을 이용한 압축
powershell Compress-Archive -Path 토지거래허가구역크롤러.exe,서울공동주택수집기.exe -DestinationPath 서울데이터수집기_Windows용_v1.0.zip

REM 또는 7-Zip, WinRAR 등 사용
```

**결과**:
- `서울데이터수집기_Windows용_v1.0.zip` (약 140-180MB)

### 멀티플랫폼 배포 패키지

**폴더 구조**:
```
서울_데이터_수집기_v1.0/
│
├── 📁 Mac용/
│   ├── 토지거래허가구역크롤러.app
│   └── 서울공동주택수집기.app
│
├── 📁 Windows용/
│   ├── 토지거래허가구역크롤러.exe
│   └── 서울공동주택수집기.exe
│
├── 📄 README.md                    (전체 사용 설명서)
├── 📄 Mac_실행방법.txt
├── 📄 Windows_실행방법.txt
└── 📄 API키_발급가이드.txt
```

**사용설명서 예시** (`Mac_실행방법.txt`):
```
Mac 사용자 실행 방법

1. "Mac용" 폴더를 엽니다

2. 원하는 프로그램을 더블클릭:
   - 토지거래허가구역크롤러.app
   - 서울공동주택수집기.app

3. 보안 경고가 뜨면:
   방법 1) 우클릭 → "열기" → "열기" 클릭
   방법 2) 터미널에서 다음 실행:
   xattr -cr 토지거래허가구역크롤러.app
   xattr -cr 서울공동주택수집기.app

4. 자동으로 브라우저가 열립니다

5. API 키 입력 후 사용

문의: [연락처]
```

## 🐛 문제 해결

### Mac 관련 문제

**문제 1**: "개발자를 확인할 수 없습니다" 오류

**해결**:
```bash
# 터미널에서 실행
xattr -cr 토지거래허가구역크롤러.app
xattr -cr 서울공동주택수집기.app
```

또는:
1. 우클릭 → "열기"
2. "열기" 버튼 다시 클릭

**문제 2**: .app 파일이 폴더로 보임

**원인**: Mac이 아닌 환경에서 압축 해제

**해결**:
- Mac에서 압축 해제해야 함
- 또는 Mac용 압축 유틸리티 사용 (Keka, The Unarchiver)

**문제 3**: 실행해도 브라우저가 안 열림

**해결**:
1. 수동으로 브라우저 열기
2. 주소 입력:
   - 토지거래: `http://127.0.0.1:5000`
   - 공동주택: `http://127.0.0.1:5001`

### Windows 관련 문제

**문제 1**: "Windows에서 PC 보호" 경고

**해결**:
1. "추가 정보" 클릭
2. "실행" 버튼 클릭

**문제 2**: 바이러스 백신이 차단

**해결**:
1. 일시적으로 실시간 보호 해제
2. 예외 목록에 추가
3. 실행 후 다시 활성화

**문제 3**: 실행 파일이 너무 큼

**원인**: Python 런타임 전체가 포함됨

**해결**: 정상입니다. 80-100MB는 정상 범위

### 공통 문제

**문제 1**: 포트가 이미 사용 중

**증상**:
```
Address already in use
Port 5000 is already allocated
```

**해결**:
```bash
# Mac/Linux
lsof -ti:5000 | xargs kill -9
lsof -ti:5001 | xargs kill -9

# Windows
netstat -ano | findstr :5000
taskkill /PID [PID번호] /F
```

**문제 2**: API 키 오류

**증상**: "API 키를 입력해주세요"

**해결**:
1. 유효한 API 키 입력 확인
2. 공백 없이 입력
3. README의 API 키 발급 가이드 참조

## 💡 배포 팁

### 1. 버전 관리

파일명에 버전 포함:
```
서울데이터수집기_Mac용_v1.0.zip
서울데이터수집기_Windows용_v1.0.zip
```

### 2. 체크섬 제공

배포 파일의 무결성 확인:

```bash
# Mac
shasum -a 256 서울데이터수집기_Mac용_v1.0.zip

# Windows
certutil -hashfile 서울데이터수집기_Windows용_v1.0.zip SHA256
```

### 3. 릴리스 노트 작성

```markdown
# v1.0 릴리스 노트

## 새로운 기능
- 토지거래허가구역 정보 수집
- 서울 공동주택 정보 수집
- 웹 기반 사용자 인터페이스

## 지원 플랫폼
- macOS 10.15+ (Catalina 이상)
- Windows 10/11

## 알려진 이슈
- macOS에서 첫 실행 시 보안 경고
- Windows Defender 경고 발생 가능

## 다운로드
- Mac용: [링크]
- Windows용: [링크]
```

### 4. 사용자 지원

**README에 포함할 내용**:
- 설치 방법
- API 키 발급 가이드
- 스크린샷
- FAQ
- 문의 방법

### 5. 클라우드 배포

**Google Drive**:
```
공유 링크 생성 → 누구나 액세스 가능 → 링크 복사
```

**GitHub Releases**:
```bash
# 태그 생성
git tag -a v1.0 -m "Release version 1.0"
git push origin v1.0

# GitHub에서 Release 생성
# dist 파일들을 Release에 첨부
```

## 📊 배포 체크리스트

### 빌드 전

- [ ] 모든 코드 테스트 완료
- [ ] API 키가 하드코딩되지 않았는지 확인
- [ ] README 업데이트
- [ ] 버전 번호 확인

### Mac 빌드

- [ ] `build-scripts/build_web_app.sh` 실행
- [ ] `build-scripts/build_apartment_app.sh` 실행
- [ ] 빌드된 .app 파일 테스트
- [ ] 압축 파일 생성
- [ ] 압축 파일 테스트 (압축 해제 후 실행)

### Windows 빌드 (Windows 컴퓨터 필요)

- [ ] `build-scripts\build_web_app.bat` 실행
- [ ] `build-scripts\build_apartment_app.bat` 실행
- [ ] 빌드된 .exe 파일 테스트
- [ ] 압축 파일 생성
- [ ] 압축 파일 테스트

### 문서 준비

- [ ] 사용 설명서 작성
- [ ] API 키 발급 가이드 작성
- [ ] 플랫폼별 실행 방법 작성
- [ ] 릴리스 노트 작성

### 배포

- [ ] 압축 파일 업로드 (Google Drive/GitHub)
- [ ] 공유 링크 생성
- [ ] 사용자에게 전달
- [ ] 피드백 수집

## 🎯 빠른 참조

### Mac 사용자에게 공유 (지금 바로)

```bash
cd /Users/foodie/myproject/Crawling/토지거래허가구역/dist
zip -r 서울데이터수집기_Mac용.zip 토지거래허가구역크롤러.app 서울공동주택수집기.app
```

**전달**: 생성된 `서울데이터수집기_Mac용.zip` 파일

### Windows 사용자에게 공유 (Windows 필요)

```cmd
REM Windows 컴퓨터에서
build-scripts\build_web_app.bat
build-scripts\build_apartment_app.bat

REM 압축
powershell Compress-Archive -Path dist\*.exe -DestinationPath 서울데이터수집기_Windows용.zip
```

**전달**: 생성된 `서울데이터수집기_Windows용.zip` 파일

---

**작성일**: 2025-12-25
**버전**: 1.0
**문의**: [GitHub Issues](https://github.com/foodie-repository/seoul-transaction-permit/issues)
